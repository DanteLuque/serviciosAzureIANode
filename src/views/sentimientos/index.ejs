<%- include('../partials/header.ejs') %>
  <div class="container text-center mt-5">
    <h1 class="mb-4">Analisis de sentimientos por texto <i class="fa-solid fa-face-laugh-wink"></i></h1>

    <form >
      <div class="row justify-content-center">
        <div class="textarea-wrapper">
          <label class="textarea-label" for="auto-textarea">Dinos como te sientes hoy:</label>
          <textarea id="auto-textarea" class="auto-expand-textarea" placeholder="SuÃ©ltalo todo bro..."
            maxlength="500"></textarea>
          <div class="character-count">0/500</div>
        </div>
      </div>
      <button type="submit" class="btn btn-primary mt-4">Enviar</button>
    </form>

  </div>

<style>
    .textarea-wrapper {
      width: 100%;
      max-width: 600px;
      border-radius: 12px;
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.08);
      padding: 20px;
      position: relative;
    }

    .textarea-label {
      display: block;
      margin-bottom: 8px;
      color: #333;
      font-weight: 500;
    }

    .auto-expand-textarea {
      width: 100%;
      min-height: 50px;
      max-height: 300px;
      padding: 12px 16px;
      box-sizing: border-box;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-family: inherit;
      font-size: 16px;
      line-height: 1.5;
      resize: none;
      overflow-y: hidden;
      transition: border-color 0.2s ease;
    }

    .auto-expand-textarea:focus {
      outline: none;
      border-color: #4a90e2;
      box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
    }

    .auto-expand-textarea::placeholder {
      color: #999;
    }

    .character-count {
      position: absolute;
      bottom: 30px;
      right: 30px;
      font-size: 12px;
      color: #666;
      background: rgba(255, 255, 255, 0.9);
      padding: 4px 8px;
      border-radius: 4px;
    }

    /* Fancy scrollbar styling */
    .auto-expand-textarea::-webkit-scrollbar {
      width: 8px;
    }

    .auto-expand-textarea::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 4px;
    }

    .auto-expand-textarea::-webkit-scrollbar-thumb {
      background: #c1c1c1;
      border-radius: 4px;
    }

    .auto-expand-textarea::-webkit-scrollbar-thumb:hover {
      background: #a8a8a8;
    }

    /* Animation for character count */
    @keyframes pulse {
      0% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.1);
      }

      100% {
        transform: scale(1);
      }
    }

    .character-count.warn {
      color: #e74c3c;
      animation: pulse 0.3s ease-in-out;
    }
</style>

<script>
    const textarea = document.getElementById('auto-textarea');
    const charCount = document.querySelector('.character-count');

    function autoResize() {
      textarea.style.height = 'auto';

      textarea.style.height = textarea.scrollHeight + 'px';

      const remaining = textarea.value.length;
      charCount.textContent = `${remaining}/500`;

      if (remaining > 400) {
        charCount.classList.add('warn');
      } else {
        charCount.classList.remove('warn');
      }

      if (textarea.scrollHeight > 300) {
        textarea.style.overflowY = 'auto';
      } else {
        textarea.style.overflowY = 'hidden';
      }
    }

    textarea.addEventListener('input', autoResize);
    textarea.addEventListener('focus', autoResize);

    autoResize();
</script>
  <%- include('../partials/footer') %>